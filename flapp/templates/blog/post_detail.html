{% extends 'blog/base.html' %}
{% block content %}
{% load static %}
    <header class="masthead" >
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-6 col-md-10 mx-auto">
          <div class="post-heading">
          <div class = "entry-header page-header">
            {% if post.cover_image %}
            <img src="{{ post.cover_image.url }}" class="img-thumbnail img-responsive" alt=""> <!-- Cover Image -->
            {% endif %}
          </div>        
            <h1>{{ post.title }}</h1>
            <h2 class="subheading">{{ post.synopsis }}</h2>
            <span class="meta">Posted by
            <a href="{{ post.post_editor.get_absolute_url }}">{{ post.post_editor.name.capitalize }}</a>
            Written by
            <a href="{{ post.author.get_absolute_url }}">{{ post.author.name.capitalize }}</a>
            on {{ post.published_date|date }}</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-detail-item">
            {{ post.get_markdown|linebreaks }}
          </div>
        </div>
      </div>
    </div>
  </article>
  <hr>

  <!--Comments-->
<div class="row">
  <div class="col-lg-8 col-md-10 mx-auto">
    <div style="text-align:center;">
      <h2 style="margin-top:30px;">Comments({{ post.comments.all.count }})</h2>
    </div>
    
    <div class="container">
    {% for comment in post.comments.all %}
      {% if comment.is_approved %}
      <div class="border text-center">
      <p> {{comment.text|linebreaks }} </p>
      <p>By: <strong>{{ comment.author.capitalize }}</strong><br><em>{{ comment.created_date|date }}</em></p>
      {% endif %}        
      </div>
    {% endfor %}<br>
    <a class="button" href="{% url 'post_comment' slug=post.slug %}">Add Comment</a>
    </div>
  </div>
</div>
<hr>

{% endblock %}