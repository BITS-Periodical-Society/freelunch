{% extends 'blog/base.html' %}
{% block content %}
{% load static %}
{% load my_filters %}


<div class="testimonial">
  <header class="masthead">
  </header>


    <div class="container" >
<div class="showcase-right" style="background-size: contain;">
<div class="row">
  <div class="col-lg-10 col-md-10 mx-auto">
    <div class="post">
      <div>
      <div class="post-title text-center">
        <h1>{{ post.title }}</h1>
      </div>
      <div class="post-cover" style="background-image: url({{ post.cover_image.url }});width: 100%;"></div>
      <div class="post-detail">
         <span class="post-credit"style="white-space:nowrap;display:inline;">
          <i class="fas fa-feather-alt"></i>
            {% for author in post.author.all %}
              {% if forloop.last and not forloop.first %}&{% endif %}
              {% if not forloop.first and not forloop.last%},{% endif %}
            <a href="{{ author.get_absolute_url }}">{{ author.name|cap }}</a>
            {% endfor %}
        </span>
        <span class="post-credit" style="white-space:nowrap;display:inline;">
          <i class="fas fa-newspaper" style="padding-right: 0.2em;"></i><a href="{{ post.post_editor.get_absolute_url }}">{{ post.post_editor.name|cap }}</a>
        </span>
        <span class="post-credit" style="white-space:nowrap;display:inline;">
          <i class='fas fa-puzzle-piece' style="padding-right: 0.2em;"></i><a href="{% url 'section-post' section=post.section %}">{{ post.get_section_display }}</a>
        </span>
        <span class="post-date" style="white-space:nowrap;display:inline;">
          <i class="fas fa-calendar-alt" style="padding-right: 0.2em;"></i>{{ post.published_date|date }}
        </span> 
      </div>
    </div>
      </div>

      <div class="post-content">
        {{ post.get_markdown|linebreaks }}
      </div>
    </div>
  </div>
</div>
<hr>
{{ recommends }}
<!-- Comments section -->
<div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://freelunch-2.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<div class="row">
  <div class="col-lg-16 col-md-10 mx-auto">
    <div style="text-align:center;">
      <h2 style="margin-top:30px;">Comments({{ post.comments.all.count }})</h2>
    </div>

    <div class="container">
      
    {% for comment in post.comments.all %}
      {% if comment.is_approved %}
      <div class="border text-center">
      <p> {{comment.text|linebreaks }} </p>
      <p>By: <strong>{{ comment.author|cap }}</strong><br><em>{{ comment.created_date|date }}</em></p>
      {% endif %}
      </div>
    {% endfor %}<br>


                            

      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div style="text-align:center;">
            <h2 style="margin-top:30px;">New Comment</h2>
          </div><hr/>
          <form method="POST" class="post-form">{% csrf_token %}
            {{ form.as_p }}
            <button type="submit" class="button">Send</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

  </div>

{% endblock %}
